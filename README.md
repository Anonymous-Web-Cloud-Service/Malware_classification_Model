# Malware_classification_Model

##악성코드 판별 모델
  - keras를 이용한 악성코드 판별 모델 구축 = Convolution AutoEncoder
  - Kaggle MicroSoft Malware classification Data set을 이용.
  ![Convolution Autoencoder 구성도](https://user-images.githubusercontent.com/52322529/64404274-58907c00-d0b6-11e9-855b-63ce727ca715.PNG)

  - 과정 : 
  ![Model 흐름도](https://user-images.githubusercontent.com/52322529/64404389-be7d0380-d0b6-11e9-95e8-7a7e3786e322.PNG)

  - 악성코드 판별 모델을 여러 가지 실험을 통해본 결과 다음과 같은 특징을 갖음.
  ![실험 결과표](https://user-images.githubusercontent.com/52322529/64404617-7ca08d00-d0b7-11e9-9c52-d415543c858d.PNG)
      - CNN 방식으로는 정확도가 50% 밖에 나오지 않아, 분석 결과 악성코드도 많은 종류의 Malware-Type이 존재하였고, 생김새 또한 많이 달라, 공통된 특징을 찾을 수 없다는 것 이였음. 그래서 오토인코더를 사용하여, 원본 이미지와 복호화된 이미지 간의 차이 값을 계산하여, 기준 값을 200으로 잡고 Test set(악성코드 11,086개, 비악성코드 3,307개)를 검증한 결과 98.17%로 악성 코드와 비악성 코드가 분리가 되는 것을 확인 할 수 있었음.
      모델에 여러 가지 Malware-Type의 악성코드를 훈련 하였고, 대부분의 같은 종류를 갖는 악성코드 파일은 비슷한 모양을 갖기 때문에, 실제 환경에서도 어느 정도 실제 악성코드 파일을 잡아내는 것을 볼 수 있었음.
      
      ! 현재는 악성코드 데이터 셋이 부족하기 때문에, 신뢰성을 높이기 위해 virustotal의 API를 이용하여 Cross-Validation를 하도록 함.
  

##virustotal API 툴
  - virustotal API를 이용한 악성코드 탐지
  - 악성코드 판별 모델과 cross-validation를 하기 위함.
  
  - 과정 : 
  ![Virustotal 흐름도](https://user-images.githubusercontent.com/52322529/64404417-db193b80-d0b6-11e9-997b-1cd4198d1f3b.PNG)



### 최종 산출
  - Model 결과 + API의 결과가 둘 다 비악성코드로 판정되는 경우 : 사용자가 파일을 업로드 할 수 있도록 함.
  - Model 결과 비악성 + API의 5개 이상의 백신들이 악성코드로 판정한 경우 : 파일을 업로드 할 수 없도록 하고, 추 후 모델에 훈련을 위해 파일을 따로 관리하도록 함.
  - Model 결과 + API의 결과가 둘 다 악성코드로 판정되는 경우 : 파일 업로드 불가.
  
    ! 사용자가 정말로 업로드를 하고 싶은 경우, 공간 관리자에게 문의나 실제 서비스 제공자(AWC Team)에게 Description를 받도록 함.
